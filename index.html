<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Braiain AI Speed Index | Daily LLM Benchmarks</title>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background: #f5f5f7;
            color: #1c1c1c;
            line-height: 1.6;
        }
        
        header {
            background: #1c1c1c;
            color: white;
            text-align: center;
            padding: 30px 20px;
        }
        
        h1 { font-size: 2.4em; margin-bottom: 8px; }
        .tagline { font-size: 1.1em; color: #c0c0c0; }
        
        .container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 0 20px;
        }
        
        .debug-info {
            background: #fff3cd;
            border: 2px solid #ffc107;
            padding: 15px;
            margin: 20px 0;
            border-radius: 8px;
        }
        
        .debug-info.success {
            background: #d4edda;
            border-color: #28a745;
        }
        
        .debug-info.error {
            background: #f8d7da;
            border-color: #dc3545;
        }
        
        .cards {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: center;
            margin: 40px 0;
        }
        
        .card {
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 20px;
            width: 100%;
            max-width: 360px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .card-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #f0f0f0;
        }
        
        .rank {
            background: #666;
            color: white;
            padding: 8px 15px;
            border-radius: 5px;
            font-weight: bold;
            font-size: 1.2em;
            margin-right: 15px;
        }
        
        .rank.gold { background: linear-gradient(135deg, #ffd700, #ffed4e); color: #1c1c1c; }
        .rank.silver { background: linear-gradient(135deg, #c0c0c0, #e8e8e8); color: #1c1c1c; }
        .rank.bronze { background: linear-gradient(135deg, #cd7f32, #e6a85c); color: #1c1c1c; }
        
        .provider { font-size: 1.3em; font-weight: 700; }
        .model { font-size: 0.9em; color: #555; }
        
        .stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin: 15px 0;
        }
        
        .stat {
            text-align: center;
        }
        
        .stat-label {
            font-size: 0.75em;
            color: #777;
            text-transform: uppercase;
            font-weight: 600;
        }
        
        .stat-value {
            font-size: 1.3em;
            font-weight: bold;
            margin-top: 5px;
        }
        
        .online { color: #2e7d32; }
        .offline { color: #c62828; }
        .fast { color: #2e7d32; }
        .medium { color: #f57c00; }
        .slow { color: #c62828; }
        
        .loading {
            text-align: center;
            padding: 60px 20px;
        }
        
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #2196f3;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        button {
            background: #2196f3;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            margin: 5px;
        }
        
        button:hover {
            background: #1976d2;
        }
        
        footer {
            background: #1c1c1c;
            color: #c0c0c0;
            text-align: center;
            padding: 30px 20px;
            margin-top: 60px;
        }
        
        pre {
            background: #f5f5f5;
            padding: 10px;
            border-radius: 4px;
            overflow-x: auto;
            font-size: 0.85em;
        }
    </style>
</head>
<body>
    <header>
        <h1>ðŸ¤– Braiain AI Speed Index</h1>
        <p class="tagline">Real-World LLM Speed, Cost & Performance Tracking</p>
    </header>

    <div class="container">
        <div id="debug-info"></div>
        <div id="controls" style="text-align: center; margin: 20px 0;">
            <button onclick="loadFromFile()">Try Loading data.json</button>
            <button onclick="useEmbeddedData()">Use Embedded Fallback Data</button>
            <button onclick="showDebugInfo()">Show Debug Info</button>
        </div>
    </div>

    <div id="results-container">
        <div class="loading">
            <div class="spinner"></div>
            <p>Attempting to load data...</p>
        </div>
    </div>

    <div class="container">
        <div id="last-updated" style="text-align: center; color: #666; margin: 20px 0;"></div>
    </div>

    <footer>
        <div>A <a href="mailto:dnilgis@gmail.com" style="color: #007bff;">dnilgis</a> project.</div>
    </footer>

    <script>
        // EMBEDDED FALLBACK DATA - from your actual data.json
        const FALLBACK_DATA = {
            "last_updated": "2025-11-28 21:56:17 UTC",
            "prompt": "Write a complete, three-paragraph summary of the history of the internet, ending with a prediction for 2030.",
            "max_tokens": 300,
            "results": [
                {
                    "provider": "Groq",
                    "model": "Llama 3.1 70B",
                    "time": 1.1861,
                    "status": "Online",
                    "response_preview": "The history of the internet began in the 1960s...",
                    "tokens_per_second": 403.84,
                    "output_tokens": 479,
                    "cost_per_request": 0.0
                },
                {
                    "provider": "OpenAI",
                    "model": "GPT-4o Mini",
                    "time": 10.2888,
                    "status": "Online",
                    "response_preview": "The history of the internet dates back to the 1960s...",
                    "tokens_per_second": 29.16,
                    "output_tokens": 300,
                    "cost_per_request": 0.000185
                },
                {
                    "provider": "Anthropic",
                    "model": "Claude 3.5 Sonnet",
                    "time": 99.9999,
                    "status": "API FAILURE",
                    "response_preview": "All model versions failed",
                    "tokens_per_second": 0,
                    "output_tokens": 0,
                    "cost_per_request": null
                },
                {
                    "provider": "Google",
                    "model": "Gemini 1.5 Pro",
                    "time": 99.9999,
                    "status": "API FAILURE",
                    "response_preview": "All model versions failed",
                    "tokens_per_second": 0,
                    "output_tokens": 0,
                    "cost_per_request": null
                }
            ]
        };

        function debugLog(message, type = 'info') {
            console.log(`[${type.toUpperCase()}] ${message}`);
            
            const debugDiv = document.getElementById('debug-info');
            const className = type === 'success' ? 'success' : type === 'error' ? 'error' : '';
            debugDiv.innerHTML += `<div class="debug-info ${className}"><strong>[${new Date().toLocaleTimeString()}]</strong> ${message}</div>`;
        }

        function displayResults(data) {
            debugLog(`Displaying ${data.results.length} results`, 'success');
            
            const container = document.getElementById('results-container');
            const lastUpdated = document.getElementById('last-updated');
            
            lastUpdated.textContent = `Last Updated: ${data.last_updated}`;
            
            let html = '<div class="cards">';
            
            data.results.forEach((result, index) => {
                const rank = index + 1;
                const rankClass = rank === 1 ? 'gold' : rank === 2 ? 'silver' : rank === 3 ? 'bronze' : '';
                const isOnline = result.status === 'Online';
                const speedClass = isOnline ? (result.time < 5 ? 'fast' : result.time < 10 ? 'medium' : 'slow') : 'offline';
                const statusClass = isOnline ? 'online' : 'offline';
                
                html += `
                    <div class="card">
                        <div class="card-header">
                            <div class="rank ${rankClass}">#${rank}</div>
                            <div>
                                <div class="provider">${result.provider}</div>
                                <div class="model">${result.model}</div>
                            </div>
                        </div>
                        <div class="stats">
                            <div class="stat">
                                <div class="stat-label">Speed</div>
                                <div class="stat-value ${speedClass}">
                                    ${isOnline ? result.time.toFixed(2) + 's' : 'N/A'}
                                </div>
                            </div>
                            <div class="stat">
                                <div class="stat-label">TPS</div>
                                <div class="stat-value ${speedClass}">
                                    ${isOnline ? Math.round(result.tokens_per_second) : 'N/A'}
                                </div>
                            </div>
                            <div class="stat">
                                <div class="stat-label">Status</div>
                                <div class="stat-value ${statusClass}">
                                    ${result.status}
                                </div>
                            </div>
                        </div>
                        <div style="text-align: center; margin-top: 10px;">
                            <div class="stat-label">Cost Per Request</div>
                            <div style="font-weight: 600; margin-top: 5px;">
                                ${result.cost_per_request === null ? 'N/A' : 
                                  result.cost_per_request === 0 ? 'FREE' : 
                                  '$' + result.cost_per_request.toFixed(4)}
                            </div>
                        </div>
                    </div>
                `;
            });
            
            html += '</div>';
            container.innerHTML = html;
            
            debugLog('âœ… Results displayed successfully!', 'success');
        }

        async function loadFromFile() {
            document.getElementById('debug-info').innerHTML = '';
            debugLog('Attempting to load data.json from file...', 'info');
            
            const paths = ['data.json', './data.json', '/data.json'];
            
            for (const path of paths) {
                try {
                    debugLog(`Trying path: ${path}`, 'info');
                    const response = await fetch(path + '?t=' + Date.now());
                    debugLog(`Status: ${response.status} ${response.statusText}`, 
                             response.ok ? 'success' : 'error');
                    
                    if (response.ok) {
                        const data = await response.json();
                        debugLog(`âœ… Successfully loaded from ${path}!`, 'success');
                        displayResults(data);
                        return;
                    }
                } catch (error) {
                    debugLog(`Failed ${path}: ${error.message}`, 'error');
                }
            }
            
            debugLog('âŒ All paths failed. Click "Use Embedded Fallback Data" to continue.', 'error');
        }

        function useEmbeddedData() {
            document.getElementById('debug-info').innerHTML = '';
            debugLog('Using embedded fallback data...', 'info');
            debugLog('This is the last data from your data.json file', 'info');
            displayResults(FALLBACK_DATA);
        }

        function showDebugInfo() {
            const info = `
Current URL: ${window.location.href}
Origin: ${window.location.origin}
Pathname: ${window.location.pathname}
Protocol: ${window.location.protocol}

If data.json is in the same folder as this HTML file, it should work.
If you're on GitHub Pages, make sure data.json is committed to the repository.

Try these steps:
1. Check that data.json exists in the same directory
2. Open browser DevTools (F12) and check Console tab
3. Look for CORS errors or 404 errors
4. If on GitHub Pages, verify the file is in the repo
            `;
            
            alert(info);
            console.log(info);
        }

        // Auto-load on page load
        debugLog('Page loaded. Current location: ' + window.location.href, 'info');
        debugLog('Attempting automatic load...', 'info');
        
        // Try to load from file first
        loadFromFile().catch(error => {
            debugLog(`Auto-load failed: ${error.message}`, 'error');
            debugLog('Using fallback data...', 'info');
            useEmbeddedData();
        });
    </script>
</body>
</html>
