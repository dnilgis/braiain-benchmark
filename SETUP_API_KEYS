#!/bin/bash
# API Keys Setup Script

echo "============================================================"
echo "üîë API KEYS CONFIGURATION HELPER"
echo "============================================================"
echo ""
echo "This script will help you configure API keys for the failing providers."
echo "You can either:"
echo "  1. Set them as environment variables"
echo "  2. Create a .env file"
echo "  3. Export them temporarily for this session"
echo ""

# Check current environment
echo "üìã Current API Key Status:"
echo ""

check_key() {
    local var_name=$1
    local provider=$2
    if [ -n "${!var_name}" ]; then
        echo "‚úÖ $provider: Set (${!var_name:0:8}...${!var_name: -4})"
    else
        echo "‚ùå $provider: Not set"
    fi
}

check_key "ANTHROPIC_API_KEY" "Anthropic"
check_key "GOOGLE_API_KEY" "Google Gemini"
check_key "GEMINI_API_KEY" "Google Gemini (alt)"
check_key "COHERE_API_KEY" "Cohere"
check_key "CO_API_KEY" "Cohere (alt)"
check_key "FIREWORKS_API_KEY" "Fireworks"
check_key "CEREBRAS_API_KEY" "Cerebras"

echo ""
echo "============================================================"
echo "üìù How to Set API Keys"
echo "============================================================"
echo ""
echo "Option 1: Export for current session"
echo "--------------------------------------"
cat << 'EOF'
export ANTHROPIC_API_KEY="sk-ant-your-key-here"
export GOOGLE_API_KEY="your-google-key-here"
export COHERE_API_KEY="your-cohere-key-here"
export FIREWORKS_API_KEY="your-fireworks-key-here"
export CEREBRAS_API_KEY="your-cerebras-key-here"
EOF

echo ""
echo "Option 2: Create .env file"
echo "--------------------------"
cat << 'EOF'
cat > .env << 'ENVFILE'
ANTHROPIC_API_KEY=sk-ant-your-key-here
GOOGLE_API_KEY=your-google-key-here
COHERE_API_KEY=your-cohere-key-here
FIREWORKS_API_KEY=your-fireworks-key-here
CEREBRAS_API_KEY=your-cerebras-key-here
ENVFILE

# Then load it with:
export $(cat .env | xargs)
EOF

echo ""
echo "Option 3: Add to ~/.bashrc or ~/.zshrc (permanent)"
echo "---------------------------------------------------"
cat << 'EOF'
echo 'export ANTHROPIC_API_KEY="sk-ant-your-key-here"' >> ~/.bashrc
echo 'export GOOGLE_API_KEY="your-google-key-here"' >> ~/.bashrc
echo 'export COHERE_API_KEY="your-cohere-key-here"' >> ~/.bashrc
echo 'export FIREWORKS_API_KEY="your-fireworks-key-here"' >> ~/.bashrc
echo 'export CEREBRAS_API_KEY="your-cerebras-key-here"' >> ~/.bashrc
source ~/.bashrc
EOF

echo ""
echo "============================================================"
echo "üîó Where to Get API Keys"
echo "============================================================"
echo ""
echo "Anthropic Claude:"
echo "  https://console.anthropic.com/settings/keys"
echo ""
echo "Google Gemini:"
echo "  https://makersuite.google.com/app/apikey"
echo "  or https://aistudio.google.com/app/apikey"
echo ""
echo "Cohere:"
echo "  https://dashboard.cohere.com/api-keys"
echo ""
echo "Fireworks AI:"
echo "  https://fireworks.ai/api-keys"
echo ""
echo "Cerebras:"
echo "  https://cloud.cerebras.ai/platform"
echo ""
echo "============================================================"
echo "üß™ Next Steps"
echo "============================================================"
echo ""
echo "1. Set your API keys using one of the methods above"
echo "2. Run the diagnostic script:"
echo "   python3 api_diagnostic.py"
echo ""
echo "3. If issues persist, check the troubleshooting guide:"
echo "   cat api_fix_guide.md"
echo ""
echo "============================================================"
